# Plot configurations for tests of DAG-based plots
---
# NOTE These need to be passed via YAML anchors (instead of based_on) because
#      in the test context not all information may be available in the pool.
.uni_defaults: &uni_defaults
  based_on: .dag.generic.facet_grid
  creator: universe
  universes: all

  x: time

.mv_defaults: &mv_defaults
  based_on: .dag.generic.facet_grid
  creator: multiverse

  x: time

# .............................................................................
uni_ts:
  <<: *uni_defaults
  select:
    data:
      path: data/ExtendedModel/state
      with_previous_result: true
      transform:
        - .mean: {dim: state_idx}

mv_ts:
  <<: *mv_defaults
  select_and_combine:
    fields:
      data:
        path: state
        with_previous_result: true
        transform:
          - .mean: {dim: state_idx}
    base_path: data/ExtendedModel

uni_custom_operation:
  <<: *uni_defaults
  select:
    data:
      path: data/ExtendedModel/state
      transform:
        - my_custom_data_operation: [!dag_prev ]
        - getattr: [!dag_prev , data]
