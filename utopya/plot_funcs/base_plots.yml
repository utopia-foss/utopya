# This file provides the base plot configurations for utopya plot functions
#
# The names of the configuration entries should follow a module path naming
# scheme, i.e. what is specified for the `module` and `plot_func` keys.
---
# -- Definition of default helpers and styles ---------------------------------
# .. A config with defaults styles and helpers ................................
# This can be used then creating a model plot and desiring default styles that
# are consistent with the utopya plot functions' styles
.default_style_and_helpers:
  helpers: &default_helpers
    save_figure:
      bbox_inches: tight

  style: &default_style
    axes.grid: true
    grid.linewidth: .4
    grid.alpha: .5


# -- CA Plots -----------------------------------------------------------------
# .. A spatial CA plot of a state .............................................
# Supports PlotHelper and animation
.ca.state: &ca_state
  creator: universe
  universes: all

  module: .ca
  plot_func: state

  file_ext: pdf

  # All animation configuration for this plot
  animation: &ca_state_animation
    enabled: false  # has to be manually enabled

    writer: frames  # assuming ffmpeg is not installed

    # Configuration for each writer
    writer_kwargs:
      frames:
        saving:
          dpi: 92
      
      ffmpeg:
        init:
          fps: 10
        saving:
          dpi: 92

# .. .ca.state specializations for different animation writers ................
.ca.state.anim_frames:
  <<: *ca_state

  file_ext: pdf

  time_idx: 0  # value is ignored in animation, but needs be specified

  animation:
    <<: *ca_state_animation
    enabled: true
    writer: frames

.ca.state.anim_ffmpeg:
  <<: *ca_state

  file_ext: mp4

  time_idx: 0  # value is ignored in animation, but needs be specified

  animation:
    <<: *ca_state_animation
    enabled: true
    writer: ffmpeg


# .. A spatial CA plot animation ..............................................
# NOTE Deprecated.
.ca.state_anim:
  creator: universe
  universes: all

  file_ext: mp4

  module: .ca
  plot_func: state_anim

  # Video options
  writer: frames  # can be: frames, ffmpeg (if installed), ...
  dpi: 96


# -- Distributions ------------------------------------------------------------
# .. A histogram plot .........................................................
.distribution.histogram: &histogram
  creator: universe
  universes: all

  module: .distribution
  plot_func: histogram

  # Use default helpers and style
  helpers:
    <<: *default_helpers
  style:
    <<: *default_style


# .. Plot of a complementary cumulative distribution ..........................
# Based on histogram, but with normalization and complementary cumulation
.distribution.histogram.complementary_cumulative:
  <<: *histogram

  use_unique: true
  mask_repeated: true
  postprocess:
    - normalize_to_sum
    - cumulate_complementary

  # Do a line plot (instead of the default bar plot)
  pyplot_func_name: plot

  # Arguments passed to plt.plot
  linestyle: 'None'
  marker: '.'


# -- Time Series --------------------------------------------------------------
# .. Plot of a single density .................................................
.time_series.density:
  creator: universe
  universes: all
  
  module: .time_series
  plot_func: density

  # Use default helpers and style
  helpers:
    <<: *default_helpers
  style:
    <<: *default_style


# .. Plot of multiple densities ...............................................
.time_series.densities:
  creator: universe
  universes: all
  
  module: .time_series
  plot_func: densities

  # Use default helpers and style
  helpers:
    <<: *default_helpers
  style:
    <<: *default_style
